#:kivy 2.1.0

<MainScreen>:
    name: "main_screen"


<MessagesScreen>:
    name: "messages_screen"
    MDBoxLayout:
        orientation: 'vertical'
        MDTopAppBar:
            title: "Алибаба"
            left_action_items: [["arrow-left", lambda x: app.screen_manager.switch_screen('main_screen')]]
            md_bg_color: app.colors['SecondColor']
            text_color: app.colors['MainColor']
        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            MDBoxLayout:
                orientation: 'vertical'
                spacing: dp(16)
                padding: dp(16)
                ChatBubble:
                    text: "[color=#FF0000]18:00 PM[/color] asdsadsaodas;djlaks;jdlkasjdkls"
        MDFloatLayout:
            size_hint_y: None
            height: dp(48)
            TextInputString:


<MainBackground@MDFloatLayout>:
    md_bg_color: app.colors['ThirdAccentColor']


<Contact@MDFloatLayout>:
    label: label
    FitImage:
        radius: [16]
        pos_hint: {'x': 0.075, 'center_y': 0.5}
        source: root.icon_source
        size_hint: None, None
        size: root.label.texture_size[1] + 16, root.label.texture_size[1] + 16
    MDLabel:
        id: label
        pos_hint: {'x': 0.2, 'center_y': 0.5}
        size_hint_x: 0.8
        text: root.text
        halign: 'left'
        font_size: 18


<SidebarNavigation@MDNavigationDrawer>:
    type: "modal"
    md_bg_color: app.colors['AccentColor']
    MDNavigationDrawerMenu:

        MDNavigationDrawerHeader:
            source: root.icon_source
            title: root.header_head
            text: root.header_body
            spacing: "8dp"
            padding: dp(12), 0, 0, dp(24)
            text_color: app.colors['MainColor']

        MDNavigationDrawerItem:
            icon: "account-cog"
            text: "Profile"
            text_color: app.colors['MainColor']
            font_size: 16
            selected_color: app.colors['MainColor']

        MDNavigationDrawerItem:
            icon: "cog"
            text: "Settings"
            text_color: app.colors['MainColor']
            font_size: 16
            selected_color: app.colors['MainColor']

        MDNavigationDrawerItem:
            icon: "account-arrow-left"
            text: "Sign out"
            text_color: app.colors['MainColor']
            font_size: 16
            selected_color: app.colors['MainColor']
            on_press: app.screen_manager.switch_screen("login_screen")


<Sidebar@SidebarNavigation>:
    back_color: app.colors['AccentColor']
    header_head: "Loading..."
    header_body: "Welcome"
    icon_source: "assets/icons/user.png"



<MainMobileView>:
    MDScreen:
        MDNavigationLayout:

            MDScreenManager:

                MDScreen:

                    MainBackground:
                        MDBoxLayout:
                            orientation: 'vertical'
                            MDFloatLayout:
                                size_hint_y: 0.10
                                MDIconButton:
                                    icon: "menu"
                                    pos_hint: {"x": 0.03, "center_y": 0.5}
                                    on_press: nav_drawer.set_state("open")
                                TextInputRound:
                                    pos_hint: {"right": 0.95, "center_y": 0.5}
                                    size_hint: 0.8, 0.6
                                    back_color: app.colors["SecondColor"]
                                    text_color: app.colors["MainColor"]
                                    hint_text: "Search"
                                    
                            RecycleView:
                                size_hint_y: 0.9
                                data: root.data
                                viewclass: 'Contact'
                                do_scroll_x: False
                                do_scroll_y: True
                                scroll_wheel_distance: 50
                                smooth_scroll_end: 15
                                RecycleGridLayout:
                                    cols: 1
                                    size_hint_y: None
                                    height: self.minimum_height
                                    default_size_hint: 1, None
                                    default_height: dp(40)
                                    size_hint_x: 1


            Sidebar:
                id: nav_drawer

<MainTabletView>:
    MDScreen:
        MDNavigationLayout:

            MDScreenManager:

                MDScreen:

                    MDBoxLayout:
                        orientation: 'horizontal'
                    
                        MainBackground:
                            size_hint_x: None
                            width: dp(300)
                            MDBoxLayout:
                                orientation: 'vertical'
                                MDFloatLayout:
                                    size_hint_y: 0.10
                                    MDIconButton:
                                        icon: "menu"
                                        pos_hint: {"x": 0.03, "center_y": 0.5}
                                        on_press: nav_drawer.set_state("open")
                                    TextInputRound:
                                        pos_hint: {"right": 0.95, "center_y": 0.5}
                                        size_hint: 0.75, 0.6
                                        back_color: app.colors["SecondColor"]
                                        text_color: app.colors["MainColor"]
                                        hint_text: "Search"
                                        
                                RecycleView:
                                    size_hint_y: 0.9
                                    data: root.data
                                    viewclass: 'Contact'
                                    do_scroll_x: False
                                    do_scroll_y: True
                                    scroll_wheel_distance: 50
                                    smooth_scroll_end: 15
                                    RecycleGridLayout:
                                        cols: 1
                                        size_hint_y: None
                                        height: self.minimum_height
                                        default_size_hint: 1, None
                                        default_height: dp(40)
                                        size_hint_x: 1
                        MessagesScreen:

            Sidebar:
                id: nav_drawer

<MainDesktopView>:
    MDScreen:
        MDNavigationLayout:

            MDScreenManager:

                MDScreen:

                    MDBoxLayout:
                        orientation: 'horizontal'
                    
                        MainBackground:
                            size_hint_x: None
                            width: dp(300)
                            MDBoxLayout:
                                orientation: 'vertical'
                                MDFloatLayout:
                                    size_hint_y: None
                                    height: dp(60)
                                    MDIconButton:
                                        icon: "menu"
                                        pos_hint: {"x": 0.03, "center_y": 0.5}
                                        on_press: nav_drawer.set_state("open")
                                    TextInputRound:
                                        pos_hint: {"right": 0.95, "center_y": 0.5}
                                        size_hint: 0.75, 0.6
                                        back_color: app.colors["SecondColor"]
                                        text_color: app.colors["MainColor"]
                                        hint_text: "Search"
                                        
                                RecycleView:
                                    size_hint_y: 0.9
                                    data: root.data
                                    viewclass: 'Contact'
                                    do_scroll_x: False
                                    do_scroll_y: True
                                    scroll_wheel_distance: 50
                                    smooth_scroll_end: 15
                                    RecycleGridLayout:
                                        cols: 1
                                        size_hint_y: None
                                        height: self.minimum_height
                                        default_size_hint: 1, None
                                        default_height: dp(40)
                                        size_hint_x: 1
                        MessagesScreen:


            Sidebar:
                id: nav_drawer
